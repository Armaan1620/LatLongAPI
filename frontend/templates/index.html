{{ define "index.html" }}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LatLongAPI - Simple Latitude & Longitude API</title>
    <link rel="stylesheet" href="/static/css/styles.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
</head>
<body>
    <div id="app"></div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script>
        const { createApp } = Vue;

        // Shared Header Component
        const AppHeader = {
            name: 'AppHeader',
            data() {
                return {
                    isAuthenticated: false,
                    user: null
                };
            },
            mounted() {
                this.checkAuth();
            },
            methods: {
                checkAuth() {
                    const token = localStorage.getItem('token');
                    if (token) {
                        this.isAuthenticated = true;
                        this.fetchUser();
                    }
                },
                async fetchUser() {
                    const token = localStorage.getItem('token');
                    if (!token) return;

                    try {
                        const response = await fetch('/api/auth/me', {
                            headers: {
                                'Authorization': `Bearer ${token}`
                            }
                        });

                        if (response.ok) {
                            const user = await response.json();
                            this.user = user;
                        } else {
                            localStorage.removeItem('token');
                            this.isAuthenticated = false;
                        }
                    } catch (error) {
                        console.error('Error fetching user:', error);
                    }
                },
                handleLogout() {
                    localStorage.removeItem('token');
                    document.cookie = 'token=; path=/; max-age=0';
                    this.isAuthenticated = false;
                    this.user = null;
                    window.location.href = '/';
                }
            },
            template: `
                <header class="site-header">
                    <div class="container header-inner">
                        <div class="nav-left">
                            <a href="/" class="logo">LatLongAPI</a>
                            <nav class="nav">
                                <a href="/why-latlong-gps">Why LongLatGPS?</a>
                                <a href="/personal">Personal</a>
                                <a href="/business">Business</a>
                                <a href="/pricing">Pricing</a>
                            </nav>
                        </div>
                        <div class="nav-right">
                            <a href="/demo" class="btn-nav">Try for free</a>
                            <a v-if="!isAuthenticated" href="/login" class="btn-nav">Login</a>
                            <template v-else>
                                <span class="btn-nav" style="margin-right: 0.5rem;" v-text="user ? user.email : 'User'"></span>
                                <button @click="handleLogout" class="btn-nav">Logout</button>
                            </template>
                        </div>
                    </div>
                </header>
            `
        };

        // Hero Section Component
        const HeroSection = {
            name: 'HeroSection',
            template: `
                <div class="hero-section">
                    <div class="container">
                       <h1 class="hero-title">GPS Coordinates Made Simple</h1>
                        <p class="hero-description">A simple, fast, and reliable API for converting latitude and longitude coordinates to human-readable addresses.</p>
                        <div class="hero-actions">
                            <a href="/demo" class="btn btn-primary">
                                <span class="btn-icon">üìç</span>
                                Try Demo
                            </a>
                            <a href="/pricing" class="btn btn-secondary">View Pricing</a>
                        </div>
                    </div>
                </div>
            `
        };

        // Stats Section Component
        const StatsSection = {
            name: 'StatsSection',
            data() {
                return {
                    stats: [
                        { icon: 'üåç', value: '100M+', label: 'Requests per month' },
                        { icon: '‚ö°', value: '99.99%', label: 'Uptime' },
                        { icon: 'üõ°Ô∏è', value: '256-bit', label: 'Encryption' },
                        { icon: 'üïê', value: '24/7', label: 'Support' }
                    ]
                };
            },
            template: `
                <div class="stats-section">
                    <div class="container">
                        <div class="stats-grid">
                            <div v-for="stat in stats" :key="stat.label" class="stat-card">
                                <div class="stat-icon" v-text="stat.icon"></div>
                                <div class="stat-value" v-text="stat.value"></div>
                                <div class="stat-label" v-text="stat.label"></div>
                            </div>
                        </div>
                    </div>
                </div>
            `
        };

        // Trust Badges Component
        const TrustBadges = {
            name: 'TrustBadges',
            template: `
                <section class="trust-badges" aria-label="Trust badges">
                    <div class="container">
                        <div class="trust-badges-inner">
                            <div class="trust-badge">
                                <div class="trust-badge-icon">
                                    <img src="/static/img/openstreetmap-logo.svg" alt="OpenStreetMap logo">
                                </div>
                                <p class="trust-badge-label">Powered by OpenStreetMap</p>
                            </div>
                            <div class="trust-badge">
                                <div class="trust-badge-icon trust-badge-icon-leaflet">
                                    <img src="/static/img/leaflet-logo.svg" alt="Leaflet.js logo">
                                </div>
                                <p class="trust-badge-label">Built with Leaflet.js</p>
                            </div>
                            <div class="trust-badge">
                                <div class="trust-badge-icon trust-badge-icon-shield" aria-hidden="true">
                                    <svg viewBox="0 0 24 24" class="trust-badge-shield-svg" role="presentation">
                                        <path d="M12 2.25L5 4.75v6.42c0 4.03 2.93 7.76 7 8.83 4.07-1.07 7-4.8 7-8.83V4.75L12 2.25z" fill="currentColor" opacity="0.12" />
                                        <path d="M12 2.25L5 4.75v6.42c0 4.03 2.93 7.76 7 8.83 4.07-1.07 7-4.8 7-8.83V4.75L12 2.25zm0 1.71l5 1.77v5.44c0 3.19-2.17 6.21-5 7.14-2.83-.93-5-3.95-5-7.14V5.73l5-1.77z" fill="currentColor" />
                                        <path d="M10.75 13.69l-1.69-1.69-.96.96 2.65 2.65 4.46-4.46-.96-.96-3.5 3.5z" fill="currentColor" />
                                    </svg>
                                </div>
                                <p class="trust-badge-label">SSL Secured</p>
                            </div>
                        </div>
                    </div>
                </section>
            `
        };

        // Testimonials Component
        const Testimonials = {
            name: 'Testimonials',
            data() {
                return {
                    testimonials: [
                        {
                            quote: 'Perfect for logistics companies needing precise addresses.',
                            author: 'Logistics Pro',
                            meta: 'Delivery Company'
                        },
                        {
                            quote: 'Essential tool for our research team\'s location analysis.',
                            author: 'Research Team',
                            meta: 'University'
                        },
                        {
                            quote: 'Simple API integration saved us weeks of development time.',
                            author: 'Dev Team',
                            meta: 'Tech Startup'
                        }
                    ]
                };
            },
            template: `
                <section class="testimonials" aria-label="Customer testimonials">
                    <div class="container">
                        <div class="testimonials-grid">
                            <article v-for="testimonial in testimonials" :key="testimonial.author" class="testimonial-card">
                                <p class="testimonial-quote">"<span v-text="testimonial.quote"></span>"</p>
                                <div class="testimonial-author">
                                    <span class="testimonial-author-name" v-text="testimonial.author"></span>
                                    <span class="testimonial-author-meta">‚Äî <span v-text="testimonial.meta"></span></span>
                                </div>
                            </article>
                        </div>
                    </div>
                </section>
            `
        };

        // Demo Preview Component (with Leaflet map)
        const DemoPreview = {
            name: 'DemoPreview',
            data() {
                return {
                    map: null,
                    marker: null,
                    coordinates: [
                        { location: 'Bangalore, India', lat: 12.9716, lng: 77.5946, latDir: 'N', lngDir: 'E' },
                        { location: 'New York, USA', lat: 40.7128, lng: 74.0060, latDir: 'N', lngDir: 'W' },
                        { location: 'Tokyo, Japan', lat: 35.6762, lng: 139.6503, latDir: 'N', lngDir: 'E' }
                    ]
                };
            },
            mounted() {
                this.$nextTick(() => {
                    const mapContainer = this.$refs.mapContainer;
                    if (!mapContainer || typeof L === 'undefined') {
                        return;
                    }

                    const bangaloreCoords = [12.9716, 77.5946];
                    this.map = L.map(mapContainer, {
                        zoomControl: true,
                        scrollWheelZoom: false,
                    }).setView(bangaloreCoords, 11);

                    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                        maxZoom: 19,
                        attribution: '¬© OpenStreetMap contributors',
                    }).addTo(this.map);

                    this.marker = L.marker(bangaloreCoords).addTo(this.map);
                    this.marker.bindPopup('<strong>Bangalore, India</strong><br>12.9716¬∞ N, 77.5946¬∞ E').openPopup();

                    window.addEventListener('resize', () => {
                        if (this.map) {
                            this.map.invalidateSize();
                        }
                    });
                });
            },
            beforeUnmount() {
                if (this.map) {
                    this.map.remove();
                }
            },
            template: `
                <section class="demo-preview" aria-label="Demo preview section">
                    <div class="container">
                        <div class="demo-preview-grid">
                            <div class="demo-preview-content">
                                <h2 class="demo-preview-title">See It In Action</h2>
                                <p class="demo-preview-subtitle">
                                    Try searching for Bangalore coordinates and see the magic happen!
                                </p>
                                <div class="demo-preview-coordinates">
                                    <div v-for="coord in coordinates" :key="coord.location" class="demo-preview-coordinate">
                                        <strong><span v-text="coord.location"></span>:</strong>
                                        <span><span v-text="coord.lat"></span>¬∞ <span v-text="coord.latDir"></span>, <span v-text="coord.lng"></span>¬∞ <span v-text="coord.lngDir"></span></span>
                                    </div>
                                </div>
                                <a href="/demo" class="btn btn-primary demo-preview-button">
                                    Try Full Demo
                                </a>
                            </div>
                            <div class="demo-preview-map-wrapper">
                                <div ref="mapContainer" class="demo-preview-map"></div>
                            </div>
                        </div>
                    </div>
                </section>
            `
        };

        // How It Works Component
        const HowItWorks = {
            name: 'HowItWorks',
            data() {
                return {
                    steps: [
                        {
                            number: 1,
                            title: 'Enter Coordinates',
                            text: 'Input latitude and longitude values in decimal format.'
                        },
                        {
                            number: 2,
                            title: 'Visualize Location',
                            text: 'See your coordinates plotted on an interactive map.'
                        },
                        {
                            number: 3,
                            title: 'Get Address',
                            text: 'Receive detailed address information for your coordinates.'
                        }
                    ]
                };
            },
            template: `
                <section class="how-it-works" aria-label="How it works">
                    <div class="container">
                        <div class="how-it-works-inner">
                            <h2 class="how-it-works-title">How It Works</h2>
                            <div class="how-it-works-steps">
                                <article v-for="step in steps" :key="step.number" class="how-it-works-step">
                                    <div class="how-it-works-badge" v-text="step.number"></div>
                                    <h3 class="how-it-works-step-title" v-text="step.title"></h3>
                                    <p class="how-it-works-step-text" v-text="step.text"></p>
                                </article>
                            </div>
                        </div>
                    </div>
                </section>
            `
        };

        // Call To Action Component
        const CallToAction = {
            name: 'CallToAction',
            template: `
                <section class="call-to-action" aria-label="Call to action">
                    <div class="container">
                        <div class="call-to-action-inner">
                            <div class="call-to-action-card">
                                <h3 class="call-to-action-title">Ready to Get Started?</h3>
                                <p class="call-to-action-text">
                                    Try our demo now and see how easy it is to work with GPS coordinates.
                                </p>
                                <a href="/demo" class="call-to-action-button">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="call-to-action-icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                        <path d="M4 13a8 8 0 0 1 7 7a6 6 0 0 0 3 -5a9 9 0 0 0 6 -8a3 3 0 0 0 -3 -3a9 9 0 0 0 -8 6a6 6 0 0 0 -5 3"></path>
                                        <path d="M7 14a6 6 0 0 0 -3 6a6 6 0 0 0 6 -3"></path>
                                        <path d="M15 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path>
                                    </svg>
                                    Start Using LatLongAPI
                                </a>
                            </div>
                        </div>
                    </div>
                </section>
            `
        };

        // Footer Component
        const AppFooter = {
            name: 'AppFooter',
            template: `
                <footer class="site-footer footer text-muted">
                    <div class="container footer-inner">
                        <span>¬© 2025 - latlongapi.com</span>
                        <a href="/Home/Privacy">Privacy</a>
                    </div>
                </footer>
            `
        };

        // Main App Component
        const App = {
            name: 'App',
            components: {
                AppHeader,
                HeroSection,
                StatsSection,
                TrustBadges,
                Testimonials,
                DemoPreview,
                HowItWorks,
                CallToAction,
                AppFooter
            },
            template: `
                <div class="app-shell">
                    <AppHeader />
                    <main class="site-main">
                        <HeroSection />
                        <StatsSection />
                        <TrustBadges />
                        <Testimonials />
                        <DemoPreview />
                        <HowItWorks />
                        <CallToAction />
                    </main>
                    <AppFooter />
                </div>
            `
        };

        // Create and mount the app
        createApp(App).mount('#app');
    </script>
</body>
</html>
{{ end }}
